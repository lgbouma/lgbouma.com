<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {{ partial "favicons.html" . }}

  <!-- flicker-free dark mode init (default: dark) -->
  <script>
    (function() {
      try {
        const key = 'theme';
        const ls  = localStorage.getItem(key);
        // Default to dark if no saved preference; honor explicit 'light'
        const useDark = ls !== 'light';
        const root = document.documentElement;
        if (useDark) root.classList.add('dark');
        else root.classList.remove('dark');
      } catch (e) {
        /* ignore */
      }
    })();
  </script>

  <title>Luke Bouma | Carnegie Science</title>

  {{ $styles := resources.Get "css/style.css" | minify -}}
  <style>
    {{- $styles.Content | safeCSS -}}
  </style>

  {{- if .RSSLink }}
  <link
    href="{{ .RSSLink }}"
    rel="alternate"
    type="application/rss+xml"
    title="{{ .Site.Title }}"
  />
  {{- end }}

  {{ template "_internal/google_analytics_async.html" . }}
  {{ partial "head_custom" . }}
</head>
